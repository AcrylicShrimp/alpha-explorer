# UI 개선 방안

이 문서에서는 UI 시스템의 개선을 논의한다.

## 기존 문제점

UI 렌더러와 Non-UI 렌더러의 구분이 없어, 렌더러마다 UI 시스템 호환 여부가 다르다.

## 해결 방안

가장 쉬운 방법은 렌더러를 구분하는 것이다.

- UI 렌더러와 Non-UI 렌더러를 구분하여, UI 시스템 호환 여부를 명확히 한다. UI에 영향을 받는 렌더러는 UI 접두사가 붙는다.

그러나 이 경우 렌더러가 추가될 때마다 UI 버전을 추가해야하는 치명적인 문제가 발생한다. 예를 들어 타일맵을 UI에 표시하고 싶은 경우, 기존 타일맵 렌더러는 UI와 호환되지 않으므로, 직접 UI로 타일맵을 흉내내거나 UI용 타일맵을 추가해야 한다. 비록 렌더러가 추가되는 일은 드물지만, 렌더러 코드가 중복되므로 렌더러 구현에 있어 큰 걸림돌이 될 것이다. 무엇보다 Non-UI 렌더러와 UI 렌더러가 호환되지 않으므로 사용자 입장에서도 매우 수고로운 일이 될 것이다.

현재 엔진은 2D를 타겟으로 한다. 3D 기능이 추가되는 일은 없다. 따라서 Non-UI 렌더러가 3D 대응을 할 필요는 지금도, 앞으로도 존재하지 않는다. 이는 곧 UI 렌더러와 Non-UI 렌더러의 구현상의 큰 차이점이 없다는 말이 된다. 그렇다면 UI 렌더러를 굳이 분리할 이유도 없다. 그러므로 아래와 같은 결론을 낼 수 있다.

- 지금과 같이 UI 렌더러와 Non-UI 렌더러간 구분을 하지 않고, 모든 종류의 렌더러가 UI에 따른 위치 및 크기 조절에 영향을 받도록 구현을 수정한다.

하지만 모든 종류의 렌더러가 UI 시스템과 호환되지는 않는다. Tilemap 렌더러가 그러하다. Tilemap 렌더러는 주어진 데이터에 따라 크기가 자동으로 조절된다. 이는 UI 시스템이 결정한 크기를 따를 수 없다는 말이 된다. 하지만, UI로 매우 자주 쓰이는 Text 렌더러도 마찬가지다. Text 렌더러 또한 주어진 데이터에 따라 크기가 자동으로 조절된다. 그러나 Text 렌더러는 이를 자체 레이아웃 설정을 제공함으로써 이 문제를 해소한다. 이러한 해결법은 Tilemap 렌더러에도 적용할 수 있다. 이를 일반화하면 아래와 같다.

- 크기를 임의로 조절할 수 없는 렌더러의 경우, 자체 레이아웃을 제공하여 크기가 달라도 overflow되는 상태로 렌더링이 가능하게 한다.
